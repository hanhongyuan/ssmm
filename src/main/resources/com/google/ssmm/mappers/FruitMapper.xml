<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.google.ssmm.dao.FruitMapper">
    <resultMap id="map1" type="com.google.ssmm.entity.Fruit">
        <id column="ID" property="id"/>
        <result column="NAME" property="name"/>
        <result column="COLOUR" property="colour"/>
        <collection property="apples" ofType="com.google.ssmm.entity.Apple">
            <id column="ID" property="id"/>
            <result column="VALUE" property="value"/>
        </collection>
    </resultMap>

    <select id="selectById" parameterType="long" resultMap="map1">
      select * from FRUIT WHERE ID = #{id}
    </select>
    <sql id="sql1">
      ${fru}.id,${fru}.name
    </sql>

    <select id="selectExample" resultType="map">
        select f.ID as id1,f.NAME as name1,a.ID as id2,a.NAME as name2
        from FRUIT f left OUTER join APPLE a ON  f.ID = a.FRUIT_ID
    </select>

    <insert id="insertFruit" parameterType="com.google.ssmm.entity.Fruit">
        <selectKey keyProperty="id" order="AFTER" resultType="int">
          select LAST_INSERT_ID()
        </selectKey>
        insert into FRUIT(NAME,COLOUR) VALUES(#{name,jdbcType=INTEGER},#{colour,jdbcType=VARCHAR})
    </insert>
</mapper>
